# Supabase Setup for Chrome Extension

## Prerequisites

1. Create a Supabase account at [https://supabase.com](https://supabase.com)
2. Create a new project

## Configuration Steps

### 1. Get Your Supabase Credentials

- Go to your Supabase project dashboard
- Navigate to Settings > API
- Copy your Project URL and anon/public key

### 2. Configure Google OAuth

1. Go to Authentication > Providers in your Supabase dashboard
2. Enable Google provider
3. Add your Google OAuth credentials:
   - Client ID
   - Client Secret
4. Add redirect URLs:
   - `https://YOUR_EXTENSION_ID.chromiumapp.org/`
   - This URL is automatically generated by `chrome.identity.getRedirectURL()`

### 3. Get Your Extension ID

- Load your extension in Chrome
- Go to `chrome://extensions/`
- Find your extension and copy the ID
- The redirect URL will be: `https://YOUR_EXTENSION_ID.chromiumapp.org/`

### 4. Build and Test

```bash
npm run build
```

Then load the `dist` folder as an unpacked extension in Chrome.

## How It Works

This implementation follows the robust OAuth pattern from [this blog post](https://beastx.ro/supabase-login-with-oauth-in-chrome-extensions):

1. **User clicks login button** → Extension opens a new tab with Supabase's OAuth endpoint
2. **Background script listens** → For when the tab redirects to the chrome extension internal URL
3. **Session is saved** → To chrome.storage.local for persistence
4. **User reopens extension** → And finds they're already logged in

This approach solves the popup closing issue that can occur with traditional OAuth flows in Chrome extensions.

## Troubleshooting

- Make sure your Supabase project has Google OAuth enabled
- Verify the redirect URL matches exactly: `https://YOUR_EXTENSION_ID.chromiumapp.org/`
- Check browser console for any authentication errors
- Ensure the background script is properly loaded (check chrome://extensions/ > your extension > service worker)
- Make sure you have the required permissions: `identity`, `tabs`, and `storage`
